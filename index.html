<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enhanced Interactive Chatbot Character Card</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap');
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        body, html {
            width: 100%;
            height: 100%;
            margin: 0;
            padding: 0;
            font-family: 'Poppins', sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            background: transparent;
            overflow: hidden;
        }
        .scene {
            width: 100%;
            height: 100%;
            perspective: 1000px;
        }
        .card {
            width: 100%;
            height: 100%;
            position: relative;
            transition: transform 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            transform-style: preserve-3d;
            cursor: pointer;
            transform: scale(0.95);
        }
        .card-face {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 20px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.2);
            overflow: hidden;
        }
        .card-front {
            background-image: url('https://i.imgur.com/tZHsqwQ.jpeg');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-end;
            padding-bottom: 30px;
        }
        .card-front::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(to bottom, rgba(0,0,0,0.1), rgba(0,0,0,0.7));
            z-index: 1;
        }
        .card-back {
            background: linear-gradient(45deg, #30115e 0%, #1a0a2e 100%);
            transform: rotateY(180deg);
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            align-items: center;
            padding: 30px;
            color: white;
            font-size: 1.2em;
            overflow-y: auto;
        }
.card-back-content {
  height: 100%; 
  width: 100%;
  /* Keep overflow-y for scrolling */
  overflow-y: auto;
  padding-right: 20px;
  padding-bottom: 20px;
}
        .card-back h2 {
            margin-bottom: 20px;
            font-size: 2.2em;
            font-weight: 600;
        }
        .card-back p {
            margin-bottom: 15px;
            text-align: center;
            line-height: 1.6;
            max-width: 80%;
        }
        .card.flipped {
            transform: rotateY(180deg) scale(0.95);
        }
        .info-button {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 40px;
            height: 40px;
            background-color: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 1.5em;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            z-index: 2;
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        .info-button:hover {
            background-color: rgba(255, 255, 255, 0.4);
        }
        .card-front .title {
            color: white;
            font-size: 2.5em;
            font-weight: 600;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
            z-index: 2;
            text-align: center;
            margin-bottom: 20px;
        }
        .magical-particles {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }
        .particle {
            position: absolute;
            background: #fff;
            border-radius: 50%;
            pointer-events: none;
            opacity: 0;
        }
        
        @media (max-width: 768px) {
            .card-back {
                font-size: 1em;
            }
            .card-back h2 {
                font-size: 1.8em;
            }
            .card-front .title {
                font-size: 2em;
            }
        }

        .card-back-content::-webkit-scrollbar {
            width: 8px;
        }
        .card-back-content::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
        }
        .card-back-content::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.3);
            border-radius: 4px;
        }
        .card-back-content::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 255, 255, 0.5);
        }
    </style>
</head>
<body>
    <div class="scene">
        <div class="card" id="card">
            <div class="card-face card-front">
                <div class="magical-particles" id="magicalParticles"></div>
                <div class="info-button" id="infoButton">i</div>
                <div class="title">Lady Elara Thornfield</div>
            </div>
            <div class="card-face card-back">
                <div class="card-back-content" id="cardBackContent">
                    <h2>BIOGRAPHY</h2>
                    <p>Lady Elara Thornfield is the enigmatic mistress of Thornfield Manor, a woman shrouded in mystery and quiet elegance. Born into privilege, she carries the burden of her family's dark legacy, yet her demeanor reflects an unusual softness, a contrast to the cruelty often associated with the Thornfield name.</p>
                    <p>Her striking beauty—marked by raven-black hair and piercing emerald eyes—only enhances her air of untouchability. Though she commands respect in the household, Elara remains an elusive figure, often retreating to the shadows of the estate, where her secrets are safely kept.</p>
                    <p>Whispers suggest she is more than just an observer of the manor's cruel practices, but her true motivations remain a mystery, hidden behind her composed façade. The depths of her character, like the manor itself, hold untold stories waiting to be unraveled.</p>
                    <p>As the years pass, Lady Elara's influence over Thornfield Manor grows, yet so do the rumors surrounding her past. Some say she possesses otherworldly abilities, while others claim she's a master manipulator, orchestrating events from behind the scenes.</p>
                    <p>Despite the swirling speculation, Lady Elara maintains her poise and dignity, rarely addressing the gossip that follows her like a shadow. Her rare moments of vulnerability are witnessed only by a select few, hinting at a complex inner world that few truly understand.</p>
                    <p>As the story of Thornfield Manor unfolds, Lady Elara Thornfield remains at its heart—a captivating enigma whose true nature may never be fully revealed, but whose presence continues to shape the destiny of all who cross her path.</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        const card = document.getElementById('card');
        const magicalParticles = document.getElementById('magicalParticles');
        const infoButton = document.getElementById('infoButton');
        const cardBackContent = document.getElementById('cardBackContent');
        let isFlipped = false;
        let lastMouseX = 0;
        let lastMouseY = 0;
        let tiltX = 0;
        let tiltY = 0;

        function lerp(start, end, factor) {
            return (1 - factor) * start + factor * end;
        }

        function handleMouseMove(e) {
            if (isFlipped) return;

            const rect = card.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;

            const centerX = rect.width / 2;
            const centerY = rect.height / 2;

            const targetTiltX = (y - centerY) / 30;
            const targetTiltY = (centerX - x) / 30;

            tiltX = lerp(tiltX, targetTiltX, 0.1);
            tiltY = lerp(tiltY, targetTiltY, 0.1);

            card.style.transform = `perspective(1000px) rotateX(${tiltX}deg) rotateY(${tiltY}deg) scale(0.95)`;

            if (Math.abs(x - lastMouseX) > 5 || Math.abs(y - lastMouseY) > 5) {
                createParticle(x, y);
                lastMouseX = x;
                lastMouseY = y;
            }
        }

        function createParticle(x, y) {
            const particle = document.createElement('div');
            particle.classList.add('particle');
            particle.style.left = x + 'px';
            particle.style.top = y + 'px';
            particle.style.width = Math.random() * 5 + 2 + 'px';
            particle.style.height = particle.style.width;
            magicalParticles.appendChild(particle);

            const animation = particle.animate([
                { transform: 'translate(0, 0)', opacity: 1 },
                { transform: `translate(${Math.random() * 100 - 50}px, ${Math.random() * 100 - 50}px)`, opacity: 0 }
            ], {
                duration: Math.random() * 1000 + 500,
                easing: 'cubic-bezier(0, .9, .57, 1)',
                delay: Math.random() * 200
            });

            animation.onfinish = () => {
                particle.remove();
            };
        }

        function resetCardPosition() {
            if (!isFlipped) {
                tiltX = 0;
                tiltY = 0;
                card.style.transform = 'perspective(1000px) rotateX(0) rotateY(0) scale(0.95)';
            }
        }

        function flipCard() {
            isFlipped = !isFlipped;
            card.classList.toggle('flipped');
            if (isFlipped) {
                card.style.transform = 'rotateY(180deg) scale(0.95)';
                cardBackContent.style.pointerEvents = 'auto';
                cardBackContent.style.overflow = 'auto';
            } else {
                resetCardPosition();
                cardBackContent.style.pointerEvents = 'none';
                cardBackContent.style.overflow = 'hidden';
            }
        }

        card.addEventListener('mousemove', handleMouseMove);
        card.addEventListener('touchmove', (e) => {
            e.preventDefault();
            handleMouseMove(e.touches[0]);
        }, { passive: false });
        card.addEventListener('mouseleave', resetCardPosition);
        card.addEventListener('click', flipCard);
        infoButton.addEventListener('click', (e) => {
            e.stopPropagation();
            flipCard();
        });

        card.addEventListener('transitionend', (e) => {
            if (e.propertyName === 'transform') {
                window.parent.postMessage(isFlipped ? 'cardFlippedToBack' : 'cardFlippedToFront', '*');
            }
        });

        function animateTilt() {
            if (!isFlipped) {
                card.style.transform = `perspective(1000px) rotateX(${tiltX}deg) rotateY(${tiltY}deg) scale(0.95)`;
            }
            requestAnimationFrame(animateTilt);
        }
        animateTilt();

        cardBackContent.addEventListener('wheel', (e) => {
            e.stopPropagation();
        }, { passive: true });

        cardBackContent.addEventListener('touchmove', (e) => {
            e.stopPropagation();
        }, { passive: true });

        cardBackContent.addEventListener('click', (e) => {
            e.stopPropagation();
        });

        cardBackContent.style.pointerEvents = 'none';
        cardBackContent.style.overflow = 'hidden';
    </script>
</body>
</html>
